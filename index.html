<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6366f1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Dizi Takip</title>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        #root { width: 100%; min-height: 100vh; }
        .loading { display: flex; justify-content: center; align-items: center; min-height: 100vh; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const firebaseConfig = {
  apiKey: "AIzaSyCnmMrVQBQ0rUWixGjsKwAPyIOAE8koOOI",
    authDomain: "dizi-takip-e54ee.firebaseapp.com",
    projectId: "dizi-takip-e54ee",
    storageBucket: "dizi-takip-e54ee.firebasestorage.app",
    messagingSenderId: "548339098004",
    appId: "1:548339098004:web:29cab16c7b361609c5ef81"
        };

        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const Plus = ({size = 24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>;
        const Trash2 = ({size = 24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>;
        const Check = ({size = 24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="20 6 9 17 4 12"/></svg>;
        const Calendar = ({size = 24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>;
        const BarChart3 = ({size = 24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></svg>;
        const Tv = ({size = 24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="2" y="7" width="20" height="15" rx="2" ry="2"/><polyline points="17 2 12 7 7 2"/></svg>;
        const Clock = ({size = 24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>;
        const Edit2 = ({size = 24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>;
        const ChevronDown = ({size = 24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="6 9 12 15 18 9"/></svg>;
        const ChevronUp = ({size = 24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="18 15 12 9 6 15"/></svg>;

        const DAYS = ['Pazartesi', 'SalÄ±', 'Ã‡arÅŸamba', 'PerÅŸembe', 'Cuma', 'Cumartesi', 'Pazar'];

        function App() {
          const [series, setSeries] = useState([]);
          const [watchedEpisodes, setWatchedEpisodes] = useState([]);
          const [activeTab, setActiveTab] = useState('program');
          const [showAddForm, setShowAddForm] = useState(false);
          const [editingSeries, setEditingSeries] = useState(null);
          const [expandedSeries, setExpandedSeries] = useState({});
          const [loading, setLoading] = useState(true);
          const [isLoggedIn, setIsLoggedIn] = useState(false);
          const [loginUsername, setLoginUsername] = useState('');
          const [currentUser, setCurrentUser] = useState('');
          const [userId, setUserId] = useState('');
          const [newSeries, setNewSeries] = useState({
            name: '', day: 'Pazartesi', time: '20:00', channel: '', seasons: [{ number: 1, totalEpisodes: 10 }]
          });

          useEffect(() => {
            const savedUser = localStorage.getItem('username');
            const savedId = localStorage.getItem('deviceId');
            
            if (savedUser && savedId) {
              setCurrentUser(savedUser);
              setUserId(savedId);
              setIsLoggedIn(true);
              setupFirebase(savedId);
            } else {
              setLoading(false);
            }
          }, []);

          const setupFirebase = async (uid) => {
            try {
              setLoading(true);
              
              const seriesRef = db.collection('users').doc(uid).collection('series');
              const watchedRef = db.collection('users').doc(uid).collection('watched');
              
              const seriesSnap = await seriesRef.get();
              const seriesData = [];
              seriesSnap.forEach(doc => seriesData.push({ ...doc.data(), id: doc.id }));
              setSeries(seriesData);

              const watchedSnap = await watchedRef.get();
              const watchedData = [];
              watchedSnap.forEach(doc => watchedData.push({ ...doc.data(), key: doc.id }));
              setWatchedEpisodes(watchedData);
              
              seriesRef.onSnapshot(snap => {
                const data = [];
                snap.forEach(doc => data.push({ ...doc.data(), id: doc.id }));
                setSeries(data);
              });

              watchedRef.onSnapshot(snap => {
                const data = [];
                snap.forEach(doc => data.push({ ...doc.data(), key: doc.id }));
                setWatchedEpisodes(data);
              });
              
              setLoading(false);
            } catch (error) {
              alert('BaÄŸlantÄ± hatasÄ±: ' + error.message);
              setLoading(false);
            }
          };

          const handleLogin = () => {
            if (!loginUsername.trim()) return alert('LÃ¼tfen kullanÄ±cÄ± adÄ± girin!');
            
            const clean = loginUsername.trim().toLowerCase().replace(/[^a-z0-9]/g, '');
            if (clean.length < 3) return alert('En az 3 karakter!');
            
            const uid = 'user_' + clean;
            localStorage.setItem('username', clean);
            localStorage.setItem('deviceId', uid);
            
            setCurrentUser(clean);
            setUserId(uid);
            setIsLoggedIn(true);
            setupFirebase(uid);
          };

          const handleLogout = () => {
            if (!confirm('Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinize emin misiniz?')) return;
            localStorage.clear();
            window.location.reload();
          };

          const addSeries = async () => {
            if (!newSeries.name.trim()) return alert('Dizi adÄ± girin!');
            
            try {
              setShowAddForm(false);
              await db.collection('users').doc(userId).collection('series').add({
                ...newSeries, addedDate: new Date().toISOString()
              });
              setNewSeries({ name: '', day: 'Pazartesi', time: '20:00', channel: '', seasons: [{ number: 1, totalEpisodes: 10 }] });
            } catch (error) {
              alert('Hata: ' + error.message);
            }
          };

          const updateSeries = async () => {
            if (!editingSeries.name.trim()) return;
            try {
              const { id, ...data } = editingSeries;
              await db.collection('users').doc(userId).collection('series').doc(id).update(data);
              setEditingSeries(null);
            } catch (error) {
              alert('GÃ¼ncelleme hatasÄ±!');
            }
          };

          const deleteSeries = async (id) => {
            if (!confirm('Silmek istediÄŸinize emin misiniz?')) return;
            try {
              await db.collection('users').doc(userId).collection('series').doc(id).delete();
              const snap = await db.collection('users').doc(userId).collection('watched').where('seriesId', '==', id).get();
              const batch = db.batch();
              snap.forEach(doc => batch.delete(doc.ref));
              await batch.commit();
            } catch (error) {
              console.error(error);
            }
          };

          const addSeason = (obj, isEdit) => {
            const seasons = obj.seasons || [];
            const num = seasons.length > 0 ? Math.max(...seasons.map(s => s.number)) : 0;
            const newSeason = { number: num + 1, totalEpisodes: 10 };
            isEdit ? setEditingSeries({ ...obj, seasons: [...seasons, newSeason] }) : setNewSeries({ ...obj, seasons: [...seasons, newSeason] });
          };

          const removeSeason = async (obj, idx, isEdit) => {
            const seasons = obj.seasons || [];
            if (seasons.length <= 1) return alert('En az bir sezon olmalÄ±!');
            const updated = seasons.filter((_, i) => i !== idx);
            
            if (isEdit) {
              setEditingSeries({ ...obj, seasons: updated });
              try {
                const removed = seasons[idx];
                const snap = await db.collection('users').doc(userId).collection('watched')
                  .where('seriesId', '==', obj.id).where('season', '==', removed.number).get();
                const batch = db.batch();
                snap.forEach(doc => batch.delete(doc.ref));
                await batch.commit();
              } catch (error) {
                console.error(error);
              }
            } else {
              setNewSeries({ ...obj, seasons: updated });
            }
          };

          const updateSeasonEpisodes = (obj, idx, total, isEdit) => {
            const seasons = obj.seasons || [];
            const updated = [...seasons];
            updated[idx] = { ...updated[idx], totalEpisodes: parseInt(total) || 1 };
            isEdit ? setEditingSeries({ ...obj, seasons: updated }) : setNewSeries({ ...obj, seasons: updated });
          };

          const toggleWatched = async (sid, season, episode) => {
            const key = `${sid}-${season}-${episode}`;
            const exists = watchedEpisodes.find(w => w.key === key);
            
            try {
              if (exists) {
                await db.collection('users').doc(userId).collection('watched').doc(key).delete();
              } else {
                await db.collection('users').doc(userId).collection('watched').doc(key).set({
                  seriesId: sid, season, episode, watchedDate: new Date().toISOString()
                });
              }
            } catch (error) {
              console.error(error);
            }
          };

          const isWatched = (sid, season, episode) => {
            return watchedEpisodes.some(w => w.key === `${sid}-${season}-${episode}`);
          };

          const toggleExpanded = (id) => {
            setExpandedSeries(prev => ({ ...prev, [id]: !prev[id] }));
          };

          const getCurrentEpisode = (s) => {
            const watched = watchedEpisodes.filter(w => w.seriesId === s.id);
            if (watched.length === 0) return { season: 1, episode: 1 };
            const latest = watched.reduce((max, w) => 
              (w.season > max.season || (w.season === max.season && w.episode > max.episode)) ? w : max
            , { season: 1, episode: 0 });
            return { season: latest.season, episode: latest.episode + 1 };
          };

          const getStats = (days) => {
            const now = new Date();
            const past = new Date(now.getTime() - days * 24 * 60 * 60 * 1000);
            const watched = watchedEpisodes.filter(w => new Date(w.watchedDate) >= past);
            return {
              total: watched.length,
              bySeries: series.map(s => ({ name: s.name, count: watched.filter(w => w.seriesId === s.id).length })).filter(s => s.count > 0)
            };
          };

          const renderForm = (obj, isEdit) => {
            const handleChange = (field, value) => isEdit ? setEditingSeries({...obj, [field]: value}) : setNewSeries({...obj, [field]: value});
            return (
              <div className="space-y-4">
                <input type="text" placeholder="Dizi AdÄ±" value={obj.name} onChange={e => handleChange('name', e.target.value)} className="w-full p-3 border rounded-lg" />
                <div className="grid grid-cols-2 gap-3">
                  <select value={obj.day} onChange={e => handleChange('day', e.target.value)} className="w-full p-3 border rounded-lg">
                    {DAYS.map(d => <option key={d} value={d}>{d}</option>)}
                  </select>
                  <input type="time" value={obj.time} onChange={e => handleChange('time', e.target.value)} className="w-full p-3 border rounded-lg" />
                </div>
                <input type="text" placeholder="Kanal" value={obj.channel} onChange={e => handleChange('channel', e.target.value)} className="w-full p-3 border rounded-lg" />
                <div className="border-t pt-4">
                  <div className="flex justify-between mb-3">
                    <h4 className="font-semibold">Sezonlar</h4>
                    <button onClick={() => addSeason(obj, isEdit)} className="px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-sm">+ Sezon</button>
                  </div>
                  <div className="space-y-3">
                    {(obj.seasons || []).map((s, i) => (
                      <div key={i} className="flex gap-3 p-3 bg-gray-50 rounded-lg">
                        <div className="w-20 font-medium">Sezon {s.number}</div>
                        <input type="number" min="1" value={s.totalEpisodes} onChange={e => updateSeasonEpisodes(obj, i, e.target.value, isEdit)} className="flex-1 p-2 border rounded-lg" />
                        <button onClick={() => removeSeason(obj, i, isEdit)} disabled={obj.seasons.length <= 1} className="p-2 text-red-500 hover:bg-red-50 rounded-lg"><Trash2 size={18} /></button>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            );
          };

          if (loading) {
            return <div className="loading"><div className="text-center"><div className="text-4xl mb-4">ðŸ“º</div><div className="text-xl font-semibold">YÃ¼kleniyor...</div></div></div>;
          }

          if (!isLoggedIn) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
                  <div className="text-center mb-8">
                    <div className="text-6xl mb-4">ðŸ“º</div>
                    <h1 className="text-3xl font-bold mb-2">Dizi Takip</h1>
                    <p className="text-gray-600">Dizilerinizi kolayca takip edin</p>
                  </div>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium mb-2">KullanÄ±cÄ± AdÄ±</label>
                      <input type="text" value={loginUsername} onChange={e => setLoginUsername(e.target.value)} onKeyPress={e => e.key === 'Enter' && handleLogin()} placeholder="Ã¶rn: ahmet123" className="w-full p-3 border rounded-lg" />
                      <p className="text-xs text-gray-500 mt-1">En az 3 karakter, sadece harf ve rakam</p>
                    </div>
                    <button onClick={handleLogin} className="w-full bg-indigo-500 text-white py-3 rounded-lg font-medium hover:bg-indigo-600">GiriÅŸ Yap</button>
                    <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800">
                      <p className="font-semibold mb-1">ðŸ’¡ Ä°pucu:</p>
                      <p>AynÄ± kullanÄ±cÄ± adÄ±nÄ± tÃ¼m cihazlarÄ±nÄ±zda kullanÄ±n!</p>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          const weekly = getStats(7);
          const monthly = getStats(30);

          return (
            <div className="min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50">
              <div className="max-w-2xl mx-auto p-4 pb-24">
                <div className="text-center mb-6 pt-4">
                  <h1 className="text-3xl font-bold mb-2">ðŸ“º Dizi Takip</h1>
                  <p className="text-gray-600">Dizilerinizi takip edin</p>
                  <div className="mt-2 flex items-center justify-center gap-2">
                    <span className="text-sm text-gray-500">ðŸ‘¤ {currentUser}</span>
                    <button onClick={handleLogout} className="text-xs text-red-500 hover:text-red-700 underline">Ã‡Ä±kÄ±ÅŸ</button>
                  </div>
                </div>

                <div className="flex gap-2 mb-6 bg-white rounded-lg p-1 shadow-sm">
                  <button onClick={() => setActiveTab('program')} className={`flex-1 py-2 px-4 rounded-lg font-medium ${activeTab === 'program' ? 'bg-indigo-500 text-white' : 'text-gray-600'}`}>Program</button>
                  <button onClick={() => setActiveTab('series')} className={`flex-1 py-2 px-4 rounded-lg font-medium ${activeTab === 'series' ? 'bg-indigo-500 text-white' : 'text-gray-600'}`}>Dizilerim</button>
                  <button onClick={() => setActiveTab('stats')} className={`flex-1 py-2 px-4 rounded-lg font-medium ${activeTab === 'stats' ? 'bg-indigo-500 text-white' : 'text-gray-600'}`}>Raporlar</button>
                </div>

                {activeTab === 'program' && (
                  <div className="space-y-4">
                    {DAYS.map(day => {
                      const daySeries = series.filter(s => s.day === day).sort((a,b) => a.time.localeCompare(b.time));
                      return (
                        <div key={day} className="bg-white rounded-lg shadow-sm p-4">
                          <h3 className="font-bold text-lg mb-3 text-indigo-700">{day}</h3>
                          {daySeries.length === 0 ? <p className="text-gray-400 text-sm">Bu gÃ¼n iÃ§in dizi yok</p> : (
                            <div className="space-y-2">
                              {daySeries.map(s => {
                                const curr = getCurrentEpisode(s);
                                return (
                                  <div key={s.id} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <div className="flex-1">
                                      <div className="font-semibold">{s.name}</div>
                                      <div className="text-sm text-gray-600 flex gap-3 mt-1">
                                        <span className="flex items-center gap-1"><Clock size={14} />{s.time}</span>
                                        {s.channel && <span>{s.channel}</span>}
                                        <span>S{curr.season}E{curr.episode}</span>
                                      </div>
                                    </div>
                                    <button onClick={() => toggleWatched(s.id, curr.season, curr.episode)} className={`p-2 rounded-full ${isWatched(s.id, curr.season, curr.episode) ? 'bg-green-500 text-white' : 'bg-gray-200'}`}><Check size={18} /></button>
                                  </div>
                                );
                              })}
                            </div>
                          )}
                        </div>
                      );
                    })}
                  </div>
                )}

                {activeTab === 'series' && (
                  <div className="space-y-3">
                    {series.length === 0 ? (
                      <div className="text-center py-12 text-gray-400">
                        <Tv size={48} className="mx-auto mb-3 opacity-50" />
                        <p>HenÃ¼z dizi eklemediniz</p>
                      </div>
                    ) : (
                      series.map(s => (
                        <div key={s.id} className="bg-white rounded-lg shadow-sm p-4">
                          <div className="flex justify-between mb-3">
                            <div>
                              <h3 className="font-bold text-lg">{s.name}</h3>
                              <p className="text-sm text-gray-600">{s.day} - {s.time}</p>
                              {s.channel && <p className="text-sm text-gray-500">{s.channel}</p>}
                            </div>
                            <div className="flex gap-2">
                              <button onClick={() => setEditingSeries({...s})} className="p-2 text-blue-500 hover:bg-blue-50 rounded-lg"><Edit2 size={18} /></button>
                              <button onClick={() => deleteSeries(s.id)} className="p-2 text-red-500 hover:bg-red-50 rounded-lg"><Trash2 size={18} /></button>
                            </div>
                          </div>
                          
                          <button onClick={() => toggleExpanded(s.id)} className="w-full flex justify-between py-2 px-3 bg-gray-100 rounded-lg mb-3 hover:bg-gray-200">
                            <span className="font-medium">{(s.seasons || []).length} Sezon</span>
                            {expandedSeries[s.id] ? <ChevronUp size={20} /> : <ChevronDown size={20} />}
                          </button>

                          {expandedSeries[s.id] && (
                            <div className="space-y-4">
                              {(s.seasons || []).map((season, idx) => {
                                const watchedCount = watchedEpisodes.filter(w => w.seriesId === s.id && w.season === season.number).length;
                                return (
                                  <div key={idx} className="border-l-4 border-indigo-500 pl-3">
                                    <div className="font-semibold text-gray-700 mb-2">Sezon {season.number} ({watchedCount}/{season.totalEpisodes})</div>
                                    <div className="grid grid-cols-5 gap-2">
                                      {[...Array(season.totalEpisodes)].map((_, i) => {
                                        const ep = i + 1;
                                        const watched = isWatched(s.id, season.number, ep);
                                        return (
                                          <button key={ep} onClick={() => toggleWatched(s.id, season.number, ep)} className={`py-2 rounded-lg text-sm font-medium ${watched ? 'bg-green-500 text-white' : 'bg-gray-100 hover:bg-gray-200'}`}>{ep}</button>
                                        );
                                      })}
                                    </div>
                                  </div>
                                );
                              })}
                            </div>
                          )}
                        </div>
                      ))
                    )}
                  </div>
                )}

                {activeTab === 'stats' && (
                  <div className="space-y-6">
                    <div className="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg shadow-lg p-6 text-white">
                      <h3 className="text-xl font-bold mb-4">ðŸ“Š Ä°statistikler</h3>
                      <div className="grid grid-cols-2 gap-4">
                        <div className="bg-white/20 rounded-lg p-4">
                          <div className="text-3xl font-bold">{series.length}</div>
                          <div className="text-sm opacity-90">Toplam Dizi</div>
                        </div>
                        <div className="bg-white/20 rounded-lg p-4">
                          <div className="text-3xl font-bold">{watchedEpisodes.length}</div>
                          <div className="text-sm opacity-90">Ä°zlenen BÃ¶lÃ¼m</div>
                        </div>
                      </div>
                    </div>

                    <div className="bg-white rounded-lg shadow-sm p-4">
                      <h4 className="font-bold text-lg mb-3 flex items-center gap-2 text-indigo-700"><Calendar size={20} />Son 7 GÃ¼n</h4>
                      <div className="text-3xl font-bold mb-3">{weekly.total} bÃ¶lÃ¼m</div>
                      {weekly.bySeries.length > 0 && (
                        <div className="space-y-2">
                          {weekly.bySeries.map((s, i) => (
                            <div key={i} className="flex justify-between py-2 border-b last:border-0">
                              <span>{s.name}</span>
                              <span className="font-semibold text-indigo-600">{s.count} bÃ¶lÃ¼m</span>
                            </div>
                          ))}
                        </div>
                      )}
                    </div>

                    <div className="bg-white rounded-lg shadow-sm p-4">
                      <h4 className="font-bold text-lg mb-3 flex items-center gap-2 text-indigo-700"><BarChart3 size={20} />Son 30 GÃ¼n</h4>
                      <div className="text-3xl font-bold mb-3">{monthly.total} bÃ¶lÃ¼m</div>
                      {monthly.bySeries.length > 0 && (
                        <div className="space-y-2">
                          {monthly.bySeries.map((s, i) => (
                            <div key={i} className="flex justify-between py-2 border-b last:border-0">
                              <span>{s.name}</span>
                              <span className="font-semibold text-indigo-600">{s.count} bÃ¶lÃ¼m</span>
                            </div>
                          ))}
                        </div>
                      )}
                    </div>
                  </div>
                )}

                {showAddForm && (
                  <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto">
                    <div className="bg-white rounded-lg p-6 w-full max-w-md my-8">
                      <h3 className="text-xl font-bold mb-4">Yeni Dizi Ekle</h3>
                      {renderForm(newSeries, false)}
                      <div className="flex gap-3 mt-6">
                        <button onClick={addSeries} className="flex-1 bg-indigo-500 text-white py-3 rounded-lg font-medium hover:bg-indigo-600">Ekle</button>
                        <button onClick={() => {
                          setShowAddForm(false);
                          setNewSeries({ name: '', day: 'Pazartesi', time: '20:00', channel: '', seasons: [{ number: 1, totalEpisodes: 10 }] });
                        }} className="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-300">Ä°ptal</button>
                      </div>
                    </div>
                  </div>
                )}

                {editingSeries && (
                  <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto">
                    <div className="bg-white rounded-lg p-6 w-full max-w-md my-8">
                      <h3 className="text-xl font-bold mb-4">Dizi DÃ¼zenle</h3>
                      {renderForm(editingSeries, true)}
                      <div className="flex gap-3 mt-6">
                        <button onClick={updateSeries} className="flex-1 bg-indigo-500 text-white py-3 rounded-lg font-medium hover:bg-indigo-600">GÃ¼ncelle</button>
                        <button onClick={() => setEditingSeries(null)} className="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-300">Ä°ptal</button>
                      </div>
                    </div>
                  </div>
                )}

                <button onClick={() => setShowAddForm(true)} className="fixed bottom-6 right-6 bg-indigo-500 text-white p-4 rounded-full shadow-lg hover:bg-indigo-600 z-40">
                  <Plus size={24} />
                </button>
              </div>
            </div>
          );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
